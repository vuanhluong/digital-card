<!doctype html><html lang="vi">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Nguyễn An • Công ty ABC</title>
<style>
body{font-family:sans-serif;text-align:center;margin:40px}
.btn{display:inline-block;padding:14px 24px;background:#006aff;color:#fff;
     border-radius:6px;text-decoration:none;font-weight:600;font-size:16px}
.btn:hover{background:#0558d7}
.note{margin-top:10px;font-size:14px;color:#555}
</style>

<a id="addBtn" class="btn">Thêm vào Danh bạ</a>
<p id="desc" class="note"></p>

<script>
const ua = navigator.userAgent;
const isiOS   = /iPad|iPhone|iPod/i.test(ua);
const isAndCh = /Android/i.test(ua) && /Chrome|Edg|Brave|OPR|Samsung/i.test(ua);

const vcfURL  = location.origin + '/nguyen_an.vcf';          // đường dẫn file VCF

if (isAndCh) {
  /* ---------- Android + Chromium: dùng Intent ---------- */
  document.getElementById('addBtn').href =
    'intent://addcontact/#Intent;' +
    'action=com.android.contacts.action.SHOW_OR_CREATE_CONTACT;' +
    'scheme=tel;data=+84901234567;' +                    /* Số bắt buộc */
    'S.name='  + encodeURIComponent('Nguyễn An') + ';' +
    'S.email=' + encodeURIComponent('an.nguyen@abc.com') + ';' +
    'package=com.android.contacts;' +                    /* ép mở app Contacts */
    'browser_fallback_url=' + encodeURIComponent(vcfURL) + ';' +
    'end';
  document.getElementById('desc').textContent =
    'Chrome (Android) sẽ mở cửa sổ “Thêm liên hệ”. Nếu không, bạn vẫn có thể tải file .vcf.';
} else {
  /* ---------- iOS & trình duyệt khác: link VCF ---------- */
  const btn = document.getElementById('addBtn');
  btn.href = vcfURL;
  if (!isiOS) btn.setAttribute('download', 'nguyen_an.vcf');   // chỉ gắn download cho Android khác, desktop
  document.getElementById('desc').textContent =
    isiOS ? 'Safari sẽ gợi ý “Add to Contacts”.'
          : 'Sau khi tải xong, hãy mở file để nhập Danh bạ.';
}
</script>
</html>
